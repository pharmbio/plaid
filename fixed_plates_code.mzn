int: temp = length(fixed_plates);

array [int] of int: fixed_plates = [1, 20, 204, 237, 158, 667, 108, 319, 665, 54, 24, 146, 294, 269, 83, 50, 272, 99, 33, 76, 139, 673, 163, 673, 222, 116, 312, 643, 39, 98, 673, 85, 211, 161, 280, 184, 45, 242, 148, 291, 103, 137, 673, 208, 672, 304, 198, 129, 308, 177, 248, 299, 645, 183, 194, 106, 135, 673, 283, 209, 311, 673, 25, 256, 218, 656, 145, 114, 263, 11, 34, 275, 252, 51, 660, 69, 232, 8, 125, 153, 113, 298, 213, 670, 74, 105, 287, 81, 673, 37, 305, 673, 207, 180, 43, 96, 30, 642, 289, 255, 244, 196, 224, 270, 2, 149, 673, 117, 646, 130, 673, 67, 160, 162, 185, 138, 13, 58, 234, 90, 673, 4, 673, 60, 268, 271, 73, 123, 164, 181, 227, 28, 92, 647, 219, 315, 671, 109, 62, 47, 240, 293, 134, 179, 15, 128, 35, 246, 306, 210, 281, 641, 267, 70, 191, 673, 115, 314, 236, 662, 75, 174, 159, 53, 257, 225, 673, 23, 100, 88, 166, 152, 673, 220, 673, 150, 250, 178, 307, 41, 64, 9, 79, 282, 230, 666, 276, 14, 188, 193, 251, 659, 292, 655, 93, 31, 19, 231, 313, 202, 46, 71, 127, 661, 157, 186, 264, 673, 21, 217, 673, 61, 175, 84, 110, 132, 147, 253, 27, 673, 215, 165, 189, 68, 32, 154, 673, 228, 18, 652, 6, 55, 657, 317, 297, 277, 104, 118, 72, 201, 121, 36, 42, 142, 295, 133, 650, 245, 644, 17, 259, 52, 673, 288, 172, 187, 170, 199, 5, 673, 229, 212, 310, 112, 216, 303, 654, 140, 260, 673, 66, 200, 173, 91, 107, 285, 223, 29, 320, 233, 247, 673, 89, 151, 663, 124, 190, 59, 316, 26, 119, 12, 78, 302, 238, 673, 87, 673, 65, 273, 197, 141, 664, 94, 56, 7, 169, 221, 243, 653, 156, 265, 111, 673, 296, 167, 278, 658, 10, 226, 102, 48, 82, 131, 22, 63, 206, 241, 286, 266, 126, 192, 673, 97, 144, 669, 101, 44, 261, 195, 649, 155, 136, 182, 673, 203, 176, 77, 279, 235, 16, 3, 122, 309, 668, 40, 168, 290, 673, 254, 673, 95, 80, 86, 284, 171, 274, 239, 318, 651, 57, 262, 214, 205, 300, 673, 258, 249, 49, 648, 301, 143, 120, 38, 654, 572, 424, 372, 420, 348, 606, 356, 560, 386, 668, 542, 333, 492, 510, 457, 673, 477, 633, 673, 624, 566, 432, 406, 623, 352, 555, 508, 609, 568, 656, 412, 673, 574, 370, 445, 346, 515, 673, 332, 387, 377, 645, 493, 586, 550, 421, 478, 410, 662, 390, 639, 673, 449, 599, 553, 391, 504, 375, 479, 328, 627, 524, 539, 485, 657, 463, 673, 620, 491, 578, 419, 417, 487, 376, 431, 530, 671, 396, 506, 450, 562, 659, 454, 673, 558, 596, 673, 579, 404, 582, 548, 461, 423, 534, 324, 604, 549, 641, 452, 536, 362, 567, 613, 331, 673, 470, 519, 483, 655, 587, 416, 330, 433, 345, 529, 673, 381, 446, 430, 476, 512, 528, 595, 673, 351, 469, 673, 498, 589, 614, 334, 434, 631, 628, 447, 458, 601, 368, 575, 556, 642, 394, 660, 533, 438, 673, 329, 341, 520, 583, 371, 543, 473, 526, 673, 564, 402, 644, 489, 397, 593, 354, 501, 632, 366, 670, 616, 367, 466, 629, 665, 611, 497, 385, 673, 636, 353, 459, 392, 538, 326, 342, 428, 405, 335, 669, 598, 518, 673, 484, 607, 525, 427, 646, 577, 323, 337, 460, 535, 481, 643, 622, 467, 502, 673, 618, 499, 475, 516, 379, 407, 610, 591, 414, 673, 673, 453, 364, 403, 378, 531, 673, 571, 503, 513, 602, 565, 413, 464, 490, 650, 551, 588, 546, 442, 652, 355, 350, 640, 448, 401, 537, 648, 500, 552, 437, 482, 411, 672, 474, 505, 361, 527, 514, 344, 673, 395, 673, 389, 561, 339, 544, 373, 488, 400, 480, 517, 388, 658, 523, 545, 439, 637, 581, 666, 380, 563, 673, 619, 496, 509, 630, 429, 360, 468, 673, 456, 673, 338, 349, 673, 393, 625, 443, 408, 615, 325, 422, 382, 663, 605, 436, 369, 569, 465, 592, 532, 521, 661, 635, 507, 634, 570, 600, 541, 425, 580, 554, 653, 343, 418, 673, 584, 612, 472, 384, 626, 440, 673, 444, 455, 322, 603, 651, 359, 327, 585, 608, 617, 638, 673, 347, 594, 673, 621, 494, 486, 399, 647, 559, 358, 340, 383, 415, 664, 576, 522, 471, 363, 597, 673, 435, 426, 649, 409, 495, 336, 357, 462, 321, 365, 673, 441, 547, 573, 667, 557, 511, 398, 540, 451, 374, 590];

%% int: experiments = compounds*max_compound_concentrations*replicates;  
int: max_experiments = 2*32*10;

constraint forall(i in Plates,j in Rows, k in Columns)(
  if (i-1)*numrows*numcols+(j-1)*numcols+k <= temp then
    if fixed_plates[(i-1)*numrows*numcols+(j-1)*numcols+k] <= max_experiments then
      plates[i,j,k] = fixed_plates[(i-1)*numrows*numcols+(j-1)*numcols+k]
    else 
      plates[i,j,k] = fixed_plates[(i-1)*numrows*numcols+(j-1)*numcols+k] - max_experiments + experiments
  endif endif);
  
  
